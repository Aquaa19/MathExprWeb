<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Algebra Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
</head>
<body data-theme="dark">
    <div class="floating-particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <h1>üßÆ Algebra Calculator</h1>
            <button class="theme-toggle" id="themeToggle" title="Toggle theme">üåô</button>
        </div>
        <p class="subtitle">Expand, Simplify, Factor, Substitute & Integrate Algebraic Expressions</p>

        <div class="mode-selector">
            <button class="mode-btn active" data-mode="expand">Expand</button>
            <button class="mode-btn" data-mode="simplify">Simplify</button>
            <button class="mode-btn" data-mode="factor">Factor</button>
            <button class="mode-btn" data-mode="substitute">Substitute</button>
            <button class="mode-btn" data-mode="integrate">Integrate</button>
            <button class="mode-btn" data-mode="differentiate">Differentiate</button>
            <button class="mode-btn" data-mode="laplace_t">Laplace Transform</button>
            <button class="mode-btn" data-mode="fourier_t">Fourier Transform</button>
            <button class="mode-btn" data-mode="mellin_t">Mellin Transform</button>
        </div>

        <div class="info-box" id="modeInfo">
            <h3>Expand Mode</h3>
            <ul>
                <li>Expands algebraic expressions</li>
                <li>Example: (x+2)(x+3) ‚Üí x¬≤ + 5x + 6</li>
                <li>Supports powers, products, and nested expressions</li>
            </ul>
        </div>

        <div class="input-section">
            <label for="expression">Expression</label>
            <div class="input-wrapper">
                <input type="text" id="expression" placeholder="e.g., (x+2)^2 or 3x¬≤+6x">
            </div>
            <div class="quick-insert">
                <button class="quick-btn" data-insert="¬≤">x¬≤</button>
                <button class="quick-btn" data-insert="¬≥">x¬≥</button>
                <button class="quick-btn" data-insert="^">^</button>
                <button class="quick-btn" data-insert="sqrt">‚àö</button>
                <button class="quick-btn" data-insert="pi">œÄ</button>
                <button class="quick-btn" data-insert="E">e</button>
                <button class="quick-btn" data-insert="(">(</button>
                <button class="quick-btn" data-insert=")">)</button>
                <button class="quick-btn" data-insert="/">√∑</button>
                <button class="quick-btn" data-insert="*">√ó</button>
                <button class="quick-btn" data-insert="+">+</button>
                <button class="quick-btn" data-insert="-">‚àí</button>
                <button class="quick-btn" data-insert="sin">sin</button>
                <button class="quick-btn" data-insert="cos">cos</button>
                <button class="quick-btn" data-insert="tan">tan</button>
                <button class="quick-btn" data-insert="log">log</button>
                <button class="quick-btn" data-insert="exp">exp</button>
                <button class="quick-btn" data-insert="I">i</button>
            </div>
            <p class="helper-text" id="helperText">Use ^ or superscripts (¬≤¬≥‚Å¥) for powers. Implicit multiplication supported: 2x, xy, (x+1)(x+2)</p>
        </div>

        <button class="calculate-btn" id="calculateBtn">
            <span id="btnText">Calculate</span>
            <span id="btnLoader" class="loader" style="display: none;"></span>
        </button>

        <div class="result-section" id="resultSection">
            <div class="result-header">
                <div class="result-label">Result</div>
                
                <button class="resimplify-btn" id="resimplifyBtn" style="display: none;" title="Re-simplify the current result">
                    ‚ôªÔ∏è Re-Simplify
                </button>

                <button class="export-latex-btn" id="exportLatexBtn" style="display: none;">
                    üìÑ Export LaTeX
                </button>
            </div>
            <div class="result-content" id="resultContent"></div>
            <div class="latex-section" id="latexSection" style="display: none;">
                <div class="latex-label">Rendered LaTeX:</div>
                <div class="latex-render" id="latexRender"></div>
            </div>
        </div>

        <div class="history-section">
            <div class="history-header">
                <div class="history-title">üìú History</div>
                <button class="clear-history-btn" id="clearHistoryBtn">Clear All</button>
            </div>
            <div id="historyContent">
                <div class="empty-history">No calculations yet</div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>